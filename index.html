<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Fonte Inter do Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Tindecisos</title> 
    
    <!-- Scripts -->
    <!-- Primeiro, o arquivo de configura√ß√£o do Firebase -->
    <script src="js/firebase-config.js"></script> 
    <!-- Depois, o script principal do aplicativo -->
    <script type="module" src="js/script.js"></script>
</head>
<body style="font-family: Inter, sans-serif;">

    <!-- O cont√™iner principal que centraliza o app -->
    <div class="app-container">
        
        <!-- Tela de Loading Inicial -->
        <div class="screen active" id="loading-screen">
            <p id="loading-message" style="font-size: 1.1rem; color: #555;">Conectando...</p>
        </div>

        <!-- Tela de Login -->
        <div class="screen" id="login-screen">
            <div class="logo-container"></div>
            <div class="login-form">
                <h2>Login</h2>
                <input type="email" id="email-input" placeholder="Seu e-mail" autocomplete="email">
                <input type="password" id="password-input" placeholder="Sua senha" autocomplete="current-password">
                <button id="login-btn" class="start-btn">Entrar</button>
                <p class="error-message" style="display: none;"></p>
            </div>
        </div>

        <!-- Tela Inicial (Home/Sess√£o) -->
        <div class="screen" id="home-screen">
            <div class="logo-container"></div>
            <p id="user-status" style="display: none;"></p>
            
            <div class="session-controls">
                <h2>Entrar em Sess√£o</h2>
                <input type="text" id="session-id-input" placeholder="ID da Sess√£o (6 letras)" maxlength="6">
                <div class="session-buttons">
                    <button id="join-session-btn" class="start-btn secondary-btn">Entrar</button>
                    <button id="create-session-btn" class="start-btn">Criar Nova Sess√£o</button>
                </div>
            </div>
            
            <button id="open-manage-btn">Gerenciar Minhas Listas</button>
            <button id="logout-btn" class="secondary-btn" style="margin-top: 0.5rem;">Sair</button>
            <p class="error-message" id="home-error-message" style="display: none;"></p>
            <p id="add-feedback"></p>
        </div>

        <!-- Tela de Sele√ß√£o de Categoria (para o Criador) -->
        <div class="screen" id="category-select-screen">
            <div class="logo-container"></div>
            <h2>Escolha uma Categoria</h2>
            <div id="category-select-list">
                <!-- Lista de categorias preenchida por JS -->
            </div>
            <button id="back-to-home-from-category" class="secondary-btn" style="margin-top: 1rem;">Voltar</button>
        </div>
        
        <!-- Tela de Lobby (aguardar jogador 2) -->
        <div class="screen" id="lobby-screen">
            <div class="logo-container"></div>
            <h2>ID da Sess√£o:</h2>
            <p id="session-id-display">ABC123</p>
            <p style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 1rem;">Compartilhe este ID com o outro jogador para come√ßar!</p>
            <p id="lobby-status">Aguardando jogador 2...</p>
            <button id="cancel-lobby-btn" class="secondary-btn" style="margin-top: 2rem;">Cancelar Sess√£o</button>
        </div>

        <!-- Tela de Swipe -->
        <div class="screen" id="swipe-screen">
            <div class="card-container">
                <div class="card" id="item-card">
                    <img id="item-image" src="https://placehold.co/400x250/eee/ccc?text=Carregando..." alt="Imagem do item">
                    <h3 id="item-name">Carregando...</h3>
                </div>
            </div>
            
            <!-- Bot√µes de Like/Dislike -->
            <div class="swipe-buttons">
                <button id="dislike-btn" class="swipe-btn" aria-label="Descartar">‚ùå</button>
                <button id="like-btn" class="swipe-btn" aria-label="Curtir">‚ù§Ô∏è</button>
            </div>
        </div>

        <!-- Tela de Resultados -->
        <div class="screen" id="results-screen">
            <div class="logo-container"></div>
            <h2>Match Encontrado! üéâ</h2>
            <p id="no-matches-msg" style="display: none;">Nenhuma combina√ß√£o encontrada üò¢</p>
            
            <ul id="liked-list">
                <!-- Lista de matches preenchida por JS -->
            </ul>

            <button id="restart-btn">Sair da Sess√£o</button>
        </div>

        <!-- Tela de Gerenciamento - Categorias -->
        <div class="screen" id="manage-category-screen">
            <div class="logo-container"></div>
            <h2>Gerenciar Listas</h2>
            <p style="font-size: 0.9rem; color: #777; margin-bottom: 1.5rem;">(Estas listas s√£o sincronizadas entre todos os usu√°rios)</p>
            <div id="manage-category-list">
                <!-- Lista de categorias para gerenciar, preenchida por JS -->
            </div>
            <button id="back-to-home-from-manage-cat-btn" class="secondary-btn" style="margin-top: 1.5rem;">Voltar</button>
        </div>
        
        <!-- Tela de Gerenciamento - Itens -->
        <div class="screen" id="manage-items-screen">
            <div class="logo-container"></div>
            <h2 id="manage-title">Gerenciar Itens</h2>
            <ul id="manage-list">
                <!-- Itens da lista ser√£o preenchidos pelo JavaScript -->
            </ul>
            <button id="back-to-manage-cat-btn" class="secondary-btn" style="margin-top: 1.5rem;">Voltar</button>
        </div>

    </div> <!-- Fim do app-container -->

    <!-- Modal (Popup) para Adicionar/Editar Itens/Categorias -->
    <div id="item-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="item-modal-title">Adicionar Novo Item</h3>
            <input type="text" id="item-name-input" placeholder="Nome (Ex: Tocar viol√£o üé∏)">
            <input type="text" id="item-image-input" placeholder="URL da Imagem (Opcional)">
            <div class="modal-buttons">
                <button id="cancel-add-btn" class="secondary-btn manage-btn">Cancelar</button>
                <button id="save-item-btn" class="manage-btn">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o para Exclus√£o -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="confirm-modal-title">Confirmar Exclus√£o</h3>
            <p id="confirm-modal-text">Voc√™ tem certeza de que deseja excluir este item? Esta a√ß√£o n√£o pode ser desfeita.</p>
            <div class="modal-buttons">
                <button id="cancel-delete-btn" class="secondary-btn manage-btn">Cancelar</button>
                <button id="confirm-delete-btn" class="manage-btn" style="background-color: var(--danger);">Excluir</button>
            </div>
        </div>
    </div>

</body>
</html>